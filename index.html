<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Unit Circle Practice</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: Arial, sans-serif;
  background: #fff;
  padding: 20px;
}

/* FIXED SYMBOL PANEL */
#symbolPanel {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  background: #fff;
  padding: 10px 0;
  z-index: 1000;
  border-bottom: 2px solid #ccc;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.symbol-buttons button {
  font-size: 24px;
  padding: 8px 16px;
  margin: 5px;
  cursor: pointer;
}

/* MAIN CONTAINER */
.container {
  max-width: 900px;
  margin: 0 auto;
  margin-top: 80px; /* space for fixed symbol panel */
}

h1 {
  text-align: center;
  margin-bottom: 10px;
}

#timer {
  text-align: center;
  font-size: 18px;
  margin-bottom: 10px;
}

/* Flex container for table + SVG */
.flex-container {
  display: flex;
  gap: 20px;
  align-items: flex-start;
  flex-wrap: wrap;
  justify-content: center;
}

.flex-item {
  flex: 1 1 300px;
  min-width: 280px;
}

/* Table */
table {
  width: 100%;
  border-collapse: collapse;
  border: 2px solid #000;
  margin-bottom: 20px;
}

th, td {
  border: 1px solid #000;
  padding: 8px;
  text-align: center;
}

td input {
  width: 100%;
  padding: 6px;
  text-align: center;
  font-size: 16px; /* prevents mobile zoom */
  line-height: 1.2;
}

td.given { background: #f0f0f0; font-weight: bold; }
td.correct { background: #90ee90; }
td.incorrect { background: #ffb6c6; }

/* Buttons */
.buttons {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}

button {
  padding: 10px 16px;
  font-weight: bold;
  cursor: pointer;
  min-width: 80px;
}

/* Responsive adjustments */
@media (max-width: 800px) {
  table th, table td {
    font-size: 14px;
    padding: 6px;
  }

  svg {
    width: 90%;
    height: auto;
  }

  .symbol-buttons button {
    font-size: 28px;
    padding: 10px 20px;
  }
}
</style>
</head>

<body>
<!-- FIXED SYMBOL PANEL -->
<div id="symbolPanel">
  <strong>Insert symbol:</strong>
  <div class="symbol-buttons">
    <button type="button" onclick="insertSymbol('√')">√</button>
    <button type="button" onclick="insertSymbol('π')">π</button>
  </div>
</div>

<div class="container">
  <h1>Unit Circle – Solve for All Values</h1>
  <div id="timer">Time: <span id="timeDisplay">00:00</span></div>

  <div class="flex-container">
    <!-- TABLE -->
    <div class="flex-item">
      <table>
        <thead>
          <tr>
            <th>radians</th>
            <th>degrees</th>
            <th>sin</th>
            <th>cos</th>
            <th>tan</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <!-- UNIT CIRCLE SVG -->
    <div class="flex-item">
      <svg xmlns="http://www.w3.org/2000/svg" width="300" height="300" viewBox="0 0 300 300" style="border:2px solid #000; background:white; border-radius:4px;">
        <circle cx="150" cy="150" r="120" fill="none" stroke="black" stroke-width="2"/>
        <line x1="30" y1="150" x2="270" y2="150" stroke="black" stroke-width="2"/>
        <line x1="150" y1="30" x2="150" y2="270" stroke="black" stroke-width="2"/>
        <text x="265" y="145" font-size="12" font-weight="bold">1</text>
        <text x="140" y="25" font-size="12" font-weight="bold">1</text>
        <text x="35" y="155" font-size="12" font-weight="bold">-1</text>
        <text x="145" y="290" font-size="12" font-weight="bold">-1</text>
        <g id="angleLines"></g>
        <g id="anglePoints"></g>
      </svg>
    </div>
  </div>

  <div class="buttons">
    <button onclick="checkAnswers()">Done</button>
    <button onclick="location.reload()">Restart</button>
  </div>
</div>

<script>
/* ------------------ UNIT CIRCLE DATA ------------------ */
const unitCircleValues = [
  { degrees:0,radians:"0",sin:"0",cos:"1",tan:"0" },
  { degrees:30,radians:"π/6",sin:"1/2",cos:"√3/2",tan:"1/√3" },
  { degrees:45,radians:"π/4",sin:"√2/2",cos:"√2/2",tan:"1" },
  { degrees:60,radians:"π/3",sin:"√3/2",cos:"1/2",tan:"√3" },
  { degrees:90,radians:"π/2",sin:"1",cos:"0",tan:"und." },
  { degrees:120,radians:"2π/3",sin:"√3/2",cos:"-1/2",tan:"-√3" },
  { degrees:135,radians:"3π/4",sin:"√2/2",cos:"-√2/2",tan:"-1" },
  { degrees:150,radians:"5π/6",sin:"1/2",cos:"-√3/2",tan:"-1/√3" },
  { degrees:180,radians:"π",sin:"0",cos:"-1",tan:"0" },
  { degrees:210,radians:"7π/6",sin:"-1/2",cos:"-√3/2",tan:"1/√3" },
  { degrees:225,radians:"5π/4",sin:"-√2/2",cos:"-√2/2",tan:"1" },
  { degrees:240,radians:"4π/3",sin:"-√3/2",cos:"-1/2",tan:"√3" },
  { degrees:270,radians:"3π/2",sin:"-1",cos:"0",tan:"und." },
  { degrees:300,radians:"5π/3",sin:"-√3/2",cos:"1/2",tan:"-√3" },
  { degrees:315,radians:"7π/4",sin:"-√2/2",cos:"√2/2",tan:"-1" },
  { degrees:330,radians:"11π/6",sin:"-1/2",cos:"√3/2",tan:"-1/√3" }
];

let problems=[], lastFocusedInput=null, timerInterval, totalSeconds=0;

/* ------------------ TIMER ------------------ */
function startTimer(){ 
  const display=document.getElementById("timeDisplay"); 
  timerInterval=setInterval(()=>{
    totalSeconds++; 
    const mins=String(Math.floor(totalSeconds/60)).padStart(2,"0"); 
    const secs=String(totalSeconds%60).padStart(2,"0"); 
    display.textContent=`${mins}:${secs}`;
  },1000);
}
function stopTimer(){ clearInterval(timerInterval);}

/* ------------------ FUNCTIONS ------------------ */
function shuffle(array){ const arr=[...array]; for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];} return arr;}
function generateProblems(){ const shuffled=shuffle(unitCircleValues); return shuffled.map(row=>{ const givenType=Math.random()>0.5?"radians":"degrees"; return { degrees:row.degrees,radians:row.radians,sin:row.sin,cos:row.cos,tan:row.tan,givenType:givenType,userAnswers:{radians:"",degrees:"",sin:"",cos:"",tan:""} }; });}
function getAlternativeForms(answer){ const forms=[answer]; if(answer==="1/√3") forms.push("√3/3"); if(answer==="√3/3") forms.push("1/√3"); if(answer==="-1/√3") forms.push("-√3/3"); if(answer==="-√3/3") forms.push("-1/√3"); if(answer==="und.") forms.push("undefined","und"); return forms;}
function checkAnswer(problem,column,userAnswer){ const correctAnswer=problem[column]; const normalized=userAnswer.trim().replace(/\s/g,"").replace("°",""); const normalizedAnswer=correctAnswer.toString().replace(/\s/g,"").replace("°",""); if(normalized===normalizedAnswer)return true; return getAlternativeForms(normalizedAnswer).includes(normalized);}

/* ------------------ TABLE ------------------ */
function renderTable(){ const tbody=document.getElementById("tableBody"); tbody.innerHTML=""; problems.forEach(p=>{ const row=document.createElement("tr"); ["radians","degrees","sin","cos","tan"].forEach(col=>{ const td=document.createElement("td"); if(p.givenType===col){ td.className="given"; td.textContent=col==="degrees"?p[col]+"°":p[col]; } else { const input=document.createElement("input"); input.addEventListener("focus",()=>lastFocusedInput=input); td.appendChild(input);} row.appendChild(td); }); tbody.appendChild(row); });}

function checkAnswers(){ stopTimer(); problems.forEach((p,i)=>{ const cells=document.querySelectorAll("#tableBody tr")[i].children; ["radians","degrees","sin","cos","tan"].forEach((col,j)=>{ const cell=cells[j]; if(cell.classList.contains("given")) return; const input=cell.querySelector("input"); const correct=checkAnswer(p,col,input.value); cell.classList.toggle("correct",correct); cell.classList.toggle("incorrect",!correct); }); });}

/* ------------------ SVG ------------------ */
function drawUnitCircle(){ const points=document.getElementById("anglePoints"); const lines=document.getElementById("angleLines"); const cx=150,cy=150,r=120; const angles=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330]; angles.forEach(deg=>{ const rad=deg*Math.PI/180; const x=cx+r*Math.cos(rad); const y=cy-r*Math.sin(rad); const line=document.createElementNS("http://www.w3.org/2000/svg","line"); line.setAttribute("x1",cx); line.setAttribute("y1",cy); line.setAttribute("x2",x); line.setAttribute("y2",y); line.setAttribute("stroke","#ccc"); lines.appendChild(line); const pt=document.createElementNS("http://www.w3.org/2000/svg","circle"); pt.setAttribute("cx",x); pt.setAttribute("cy",y); pt.setAttribute("r",4); pt.setAttribute("fill","black"); points.appendChild(pt); });}

/* ------------------ SYMBOL BUTTONS ------------------ */
function insertSymbol(symbol){ if(!lastFocusedInput) return; const start=lastFocusedInput.selectionStart; const end=lastFocusedInput.selectionEnd; const value=lastFocusedInput.value; lastFocusedInput.value=value.slice(0,start)+symbol+value.slice(end); lastFocusedInput.selectionStart=lastFocusedInput.selectionEnd=start+symbol.length; lastFocusedInput.focus(); }
document.addEventListener("focusin",e=>{ if(e.target.tagName==="INPUT") lastFocusedInput=e.target; });

/* ------------------ INIT ------------------ */
function init(){ problems=generateProblems(); renderTable(); drawUnitCircle(); startTimer(); }
init();
</script>
</body>
</html>
