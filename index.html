<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Unit Circle Practice</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }
html, body { height:100%; font-family: Arial, sans-serif; }
body { background:#fff; }

/* ---------- TOP PANEL ---------- */
#topPanel {
  position: fixed;
  top: 0; left:0;
  width:100%;
  z-index: 9998;
  background: #f8f8f8;
  height: 200px;
  border-bottom:1px solid #ccc;
  display:flex;
  align-items:center;
  justify-content: space-around;
  box-shadow:0 1px 2px rgba(0,0,0,0.1);
}

#topMiniCircle {
  height: 100%;
  width: auto;
}

#topTimer {
  font-size: 24px;
  font-weight: bold;
}

.topButtons {
  display:flex;
  flex-direction: column;
  gap:10px;
}

.topButtons button {
  padding:8px 14px;
  font-weight:bold;
  cursor:pointer;
  min-width:90px;
}

/* ---------- MAIN CONTENT ---------- */
#scrollContainer {
  max-width:900px;
  margin:0 auto;
  margin-top:200px;
  padding-bottom:200px;
}

h1 {
  text-align:center;
  margin-bottom:6px;
}

#note {
  text-align:center;
  font-size: 0.55em;
  margin-bottom:14px;
  color:#444;
}

.flex-container {
  display:flex;
  gap:20px;
  align-items:flex-start;
  flex-wrap:wrap;
  justify-content:center;
}

.flex-item { flex:1 1 300px; min-width:280px; }

/* ---------- TABLE ---------- */
table {
  width:100%;
  border-collapse:collapse;
  border:2px solid #000;
  margin-bottom:20px;
}

th, td {
  border:1px solid #000;
  padding:8px;
  text-align:center;
}

td input {
  width:100%;
  padding:6px;
  text-align:center;
  font-size:16px;
}

td.given { background:#f0f0f0; font-weight:bold; }
td.correct { background:#90ee90; }
td.incorrect { background:#ffb6c6; }

/* ---------- SYMBOL PANEL ---------- */
#floatingPanel {
  position:absolute;
  display:none;
  background:#fff;
  border:1px solid #999;
  box-shadow:0 2px 5px rgba(0,0,0,0.2);
  padding:5px;
  border-radius:4px;
  z-index:9999;
}

.symbol {
  display:inline-block;
  font-size:20px;
  padding:4px 10px;
  margin:2px;
  background:#eee;
  border-radius:3px;
  cursor:pointer;
  user-select:none;
}

.symbol:active { background:#ccc; }

@media (max-width:800px){
  table th, table td { font-size:14px; padding:6px; }
  svg { width:90%; height:auto; }
  .symbol { font-size:24px; padding:6px 12px; }
  .topButtons button { font-size:14px; padding:6px 10px; }
}
</style>
</head>

<body>

<!-- ---------- TOP BAR ---------- -->
<div id="topPanel">

  <svg id="topMiniCircle" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 300">
    <circle cx="150" cy="150" r="120" fill="none" stroke="black" stroke-width="2"/>
    <line x1="30" y1="150" x2="270" y2="150" stroke="black" stroke-width="2"/>
    <line x1="150" y1="30" x2="150" y2="270" stroke="black" stroke-width="2"/>
    <text x="265" y="145" font-size="12" font-weight="bold">1</text>
    <text x="140" y="25" font-size="12" font-weight="bold">1</text>
    <text x="35" y="155" font-size="12" font-weight="bold">-1</text>
    <text x="145" y="290" font-size="12" font-weight="bold">-1</text>
    <g id="miniAngleLines"></g>
    <g id="miniAnglePoints"></g>
  </svg>

  <div id="topTimer">00:00</div>

  <div class="topButtons">
    <button onclick="checkAnswers()">Done</button>
    <button onclick="location.reload()">Restart</button>
  </div>
</div>

<!-- ---------- MAIN ---------- -->
<div id="scrollContainer">
  <h1>Unit Circle – Solve for All Values</h1>
  <div id="note">
    <h1>For undefined values, type in "und." in the textbox</h1>
  </div>

  <div class="flex-container">
    <div class="flex-item">
      <table>
        <thead>
          <tr>
            <th>radians</th>
            <th>degrees</th>
            <th>sin</th>
            <th>cos</th>
            <th>tan</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <div class="flex-item">
      <svg width="300" height="300" style="border:2px solid #000; background:white; border-radius:4px;">
        <circle cx="150" cy="150" r="120" fill="none" stroke="black" stroke-width="2"/>
        <line x1="30" y1="150" x2="270" y2="150" stroke="black" stroke-width="2"/>
        <line x1="150" y1="30" x2="150" y2="270" stroke="black" stroke-width="2"/>
        <text x="265" y="145" font-size="12" font-weight="bold">1</text>
        <text x="140" y="25" font-size="12" font-weight="bold">1</text>
        <text x="35" y="155" font-size="12" font-weight="bold">-1</text>
        <text x="150" y="280" font-size="12" font-weight="bold">-1</text>
        <g id="angleLines"></g>
        <g id="anglePoints"></g>
      </svg>
    </div>
  </div>
</div>

<!-- ---------- SYMBOL PANEL ---------- -->
<div id="floatingPanel">
  <div class="symbol" data-symbol="√">√</div>
  <div class="symbol" data-symbol="π">π</div>
</div>

<script>
/* ---------- DATA ---------- */
const unitCircleValues = [
 { degrees:0,radians:"0",sin:"0",cos:"1",tan:"0" },
 { degrees:30,radians:"π/6",sin:"1/2",cos:"√3/2",tan:"1/√3" },
 { degrees:45,radians:"π/4",sin:"√2/2",cos:"√2/2",tan:"1" },
 { degrees:60,radians:"π/3",sin:"√3/2",cos:"1/2",tan:"√3" },
 { degrees:90,radians:"π/2",sin:"1",cos:"0",tan:"und." },
 { degrees:120,radians:"2π/3",sin:"√3/2",cos:"-1/2",tan:"-√3" },
 { degrees:135,radians:"3π/4",sin:"√2/2",cos:"-√2/2",tan:"-1" },
 { degrees:150,radians:"5π/6",sin:"1/2",cos:"-√3/2",tan:"-1/√3" },
 { degrees:180,radians:"π",sin:"0",cos:"-1",tan:"0" },
 { degrees:210,radians:"7π/6",sin:"-1/2",cos:"-√3/2",tan:"1/√3" },
 { degrees:225,radians:"5π/4",sin:"-√2/2",cos:"-√2/2",tan:"1" },
 { degrees:240,radians:"4π/3",sin:"-√3/2",cos:"-1/2",tan:"√3" },
 { degrees:270,radians:"3π/2",sin:"-1",cos:"0",tan:"und." },
 { degrees:300,radians:"5π/3",sin:"-√3/2",cos:"1/2",tan:"-√3" },
 { degrees:315,radians:"7π/4",sin:"-√2/2",cos:"√2/2",tan:"-1" },
 { degrees:330,radians:"11π/6",sin:"-1/2",cos:"√3/2",tan:"-1/√3" }
];

let problems=[], timerInterval, totalSeconds=0, lastFocusedInput=null;

/* ---------- TIMER ---------- */
function startTimer(){
  const display=document.getElementById("topTimer");
  timerInterval=setInterval(()=>{
    totalSeconds++;
    const m=String(Math.floor(totalSeconds/60)).padStart(2,"0");
    const s=String(totalSeconds%60).padStart(2,"0");
    display.textContent=`${m}:${s}`;
  },1000);
}

function stopTimer(){ clearInterval(timerInterval); }

/* ---------- LOGIC ---------- */
function shuffle(a){ return [...a].sort(()=>Math.random()-0.5); }

function generateProblems(){
  return shuffle(unitCircleValues).map(r=>{
    const g=Math.random()>0.5?"radians":"degrees";
    return {...r,givenType:g};
  });
}

function getAlternativeForms(a){
  const f=[a];
  if(a==="1/√3") f.push("√3/3");
  if(a==="√3/3") f.push("1/√3");
  if(a==="-1/√3") f.push("-√3/3");
  if(a==="-√3/3") f.push("-1/√3");
  if(a==="und.") f.push("undefined","und");
  return f;
}

function checkAnswer(p,c,u){
  const n=u.trim().replace(/\s|°/g,"");
  const a=p[c].replace(/\s|°/g,"");
  return n===a || getAlternativeForms(a).includes(n);
}

/* ---------- TABLE ---------- */
function renderTable(){
  const tb=document.getElementById("tableBody");
  tb.innerHTML="";
  problems.forEach(p=>{
    const tr=document.createElement("tr");
    ["radians","degrees","sin","cos","tan"].forEach(c=>{
      const td=document.createElement("td");
      if(p.givenType===c){
        td.className="given";
        td.textContent=c==="degrees"?p[c]+"°":p[c];
      } else {
        const i=document.createElement("input");
        i.onfocus=()=>{lastFocusedInput=i; showFloatingPanel(i);}
        i.onblur=hideFloatingPanel;
        td.appendChild(i);
      }
      tr.appendChild(td);
    });
    tb.appendChild(tr);
  });
}

function checkAnswers(){
  stopTimer();
  [...document.querySelectorAll("#tableBody tr")].forEach((tr,i)=>{
    ["radians","degrees","sin","cos","tan"].forEach((c,j)=>{
      const td=tr.children[j];
      if(td.classList.contains("given")) return;
      const ok=checkAnswer(problems[i],c,td.querySelector("input").value);
      td.classList.toggle("correct",ok);
      td.classList.toggle("incorrect",!ok);
    });
  });
}

/* ---------- CIRCLES ---------- */
function drawCircle(lines,pts,rw){
  const cx=150,cy=150,r=120;
  [0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330].forEach(d=>{
    const rad=d*Math.PI/180;
    const x=cx+r*Math.cos(rad), y=cy-r*Math.sin(rad);
    const l=document.createElementNS("http://www.w3.org/2000/svg","line");
    l.setAttribute("x1",cx);l.setAttribute("y1",cy);
    l.setAttribute("x2",x);l.setAttribute("y2",y);
    l.setAttribute("stroke","#ccc");
    if(rw) l.setAttribute("stroke-width","1");
    lines.appendChild(l);
    const p=document.createElementNS("http://www.w3.org/2000/svg","circle");
    p.setAttribute("cx",x);p.setAttribute("cy",y);
    p.setAttribute("r",rw?2:4);
    pts.appendChild(p);
  });
}

/* ---------- SYMBOL PANEL ---------- */
const fp=document.getElementById("floatingPanel");
function showFloatingPanel(i){
  const r=i.getBoundingClientRect();
  fp.style.display="block";
  fp.style.top=(window.scrollY+r.top-fp.offsetHeight-5)+"px";
  fp.style.left=(window.scrollX+r.left)+"px";
}
function hideFloatingPanel(){ fp.style.display="none"; }

fp.querySelectorAll(".symbol").forEach(s=>{
  s.onmousedown=s.ontouchstart=e=>{
    e.preventDefault();
    if(!lastFocusedInput) return;
    const i=lastFocusedInput;
    const p=i.selectionStart;
    i.value=i.value.slice(0,p)+s.dataset.symbol+i.value.slice(p);
    i.selectionStart=i.selectionEnd=p+1;
    i.focus();
  };
});

/* ---------- INIT ---------- */
function init(){
  problems=generateProblems();
  renderTable();
  drawCircle(angleLines,anglePoints,false);
  drawCircle(miniAngleLines,miniAnglePoints,true);
  startTimer();
}
init();
</script>
</body>
</html>
